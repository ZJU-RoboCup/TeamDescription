# 小型足球机器人--电路组

## 1. 电路架构

电路负责从软件电脑指令的发出，到机械电机的运转、平挑射的执行，之间的信号传输与处理等部分。主要分为通讯模块、FPGA信号处理模块、电机驱动模块、平挑射模块等：

* 1.1 通讯模块

	作为机器人和电脑通信的主要功能模块，其抗干扰性、信号的完整性在比赛中尤为重要。

	由于赛场环境的复杂性，为了保证通讯质量，ZJUNlict通讯采用的是频点2.4GHz ，带宽可达2Mbps的**Nordic nRF24L01P 芯片**模块。同时，也选用了更大增益的发射天线和更为灵敏的接收天线，保证了信号的灵敏性与完整性。


* 1.2 FPGA模块

	FPGA模块是机器人的控制中心，具体功能为将通讯信息转化为控制电机、平射、挑射等的信号。

	FPGA，即现场可编程门阵列，内部包含众多的逻辑门，可以通过硬件描述语言（Verilog或VHDL）完成简单的综合与布局，再快速的烧录至 FPGA 上实现相关的的逻辑功能。这也是ZJUNlict选用FPGA作为处理器，并行处理五个电机PWM信号的原因。

	ZJUNlict目前才用的是ALTERA公司生产的**Cyclone III**的一款FPGA处理器，其包含25K逻辑门，信号处理频率达100MHz ，目前可以满足赛场上的需求。其处理软件为Quatus II 13.1。

* 1.3 电机驱动模块

	电机驱动模块分为五个电机驱动部分，每一部分负责将来自FPGA的六路驱动信号转化为控制电机的三相信号，控制电机的运转与制动。

	ZJUNlict驱动模块采用**半桥驱动**，选用**IR2103S芯片**控制**IRFR1205 MOS管**的轮流导通，从而控制电机的运转。同时选用**ACS712电流检测芯片**检测电流，实现电机的过流保护。

* 1.4 平射、挑射模块

	平射、挑射模块在电路中表现为升压板，通过将2个2200uF升到200V左右的高压，经过线圈放电，带动平射、挑射杆的方式，实现机器人的平射、挑射功能。

	ZJUNlict目前采用的是**BOOST升压**方式，将电压升到220V，升压模块在小型里算是非常稳定的了。


## 2. 关键技术

* 2.1 PCB绘制

	电路的维护和创新都离不开队员对于电路板原理的掌握与PCB的绘制与维修，例如使用**AD绘制PCB**等。

* 2.2 代码

	电路FPGA、通讯模块都包含十分重要的代码部分，队员需要**熟练操作FPGA、STM32等芯片**。具体包含**Verilog的掌握,以及Quartus、NIOS II等软件的使用**。

* 2.3 沟通与扩展

	电路需要粗略了解**机械结构、软件的需求**，从而更好的沟通协作。


## 3. 未来发展

* 3.1 驱动、升压方式的改进

	半桥驱动更换为**BLDC驱动模块**，减轻FPGA的压力。BOOST升压方式换为**Flyback升压**，减少升压板元器件，为电路其他部分留下空间等。

* 3.2 FPGA的改进

	将FPGA单独处理换为**FPGA+STM32处理**，在STM32上面搭建**实时操作系统**等。

* 3.3 传感器的使用

	在机器人上面装备更多、功能性较强的传感器等。




